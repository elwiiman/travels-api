(this["webpackJsonptravels-front"]=this["webpackJsonptravels-front"]||[]).push([[0],{37:function(e,a,t){e.exports=t(68)},42:function(e,a,t){},66:function(e,a,t){},68:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(33),r=t.n(c),o=(t(42),t(6)),i=function(e){var a=e.submit,t=e.action,n=e.email,c=void 0===n?"":n,r=e.usernameOrEmail,o=void 0===r?"":r,i=e.password,s=void 0===i?"":i,u=e.confirmPass,m=void 0===u?"":u,d=e.username,p=void 0===d?"":d,v=e.handleChange;return l.a.createElement("form",{className:"uk-form-stacked",onSubmit:a},l.a.createElement("div",{className:"uk-margin"},l.a.createElement("label",{className:"uk-form-label"},"signup"===t?"Email":"Email o Username"),l.a.createElement("div",{className:"uk-inline"},l.a.createElement("span",{className:"uk-form-icon","uk-icon":"signup"===t?"icon: mail":"icon: user"}),l.a.createElement("input",{onChange:v,name:"signup"===t?"email":"usernameOrEmail",value:"signup"===t?c:o,className:"uk-input",type:"signup"===t?"email":"text",autoComplete:"on"}))),"signup"===t?l.a.createElement("div",{className:"uk-margin"},l.a.createElement("label",{className:"uk-form-label"},"Username"),l.a.createElement("div",{className:"uk-inline"},l.a.createElement("span",{className:"uk-form-icon","uk-icon":"icon: user"}),l.a.createElement("input",{onChange:v,name:"username",value:p,className:"uk-input",type:"text",autoComplete:"on"}))):null,l.a.createElement("div",{className:"uk-margin"},l.a.createElement("label",{className:"uk-form-label"},"Password"),l.a.createElement("div",{className:"uk-inline"},l.a.createElement("span",{className:"uk-form-icon","uk-icon":"icon: lock"}),l.a.createElement("input",{onChange:v,name:"password",value:s,className:"uk-input",type:"password",autoComplete:"on"}))),"signup"===t?l.a.createElement("div",{className:"uk-margin"},l.a.createElement("label",{className:"uk-form-label"},"Confirm Password"),l.a.createElement("div",{className:"uk-inline"},l.a.createElement("span",{className:"uk-form-icon","uk-icon":"icon: lock"}),l.a.createElement("input",{onChange:v,name:"confirmPass",value:m,className:"uk-input",type:"password",autoComplete:"on"}))):null,l.a.createElement("div",{className:"uk-container uk-flex uk-flex-center"},l.a.createElement("button",{className:"uk-button uk-button-primary",type:"submit"},t)))},s=t(14),u=t(5);function m(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?m(t,!0).forEach((function(a){Object(s.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var p=function(){var e=Object(n.useState)({}),a=Object(u.a)(e,2),t=a[0],l=a[1];return{form:t,setForm:l,handleInput:function(e){var a=e.target,t=a.name,n=a.value;console.log(t,n),l((function(e){return d({},e,Object(s.a)({},t,n))}))},handleFileInput:function(e){var a=e.target,t=a.name,n=a.files;l((function(e){return d({},e,Object(s.a)({},t,n))}))},removeKey:function(e){var a=d({},t);delete a[e],l(d({},a))},removeKeyWithIndex:function(e,a){var n=d({},t);delete n[e],n.route.splice(a,1),l(d({},n))}}},v=t(9),k=t.n(v),E=Object(n.createContext)(),f=function(e){var a=e.children,t=JSON.parse(localStorage.getItem("user"))||{},c=Object(n.useState)(t),r=Object(u.a)(c,2),o=r[0],i=r[1],s=Object(n.useState)([]),m=Object(u.a)(s,2),d=m[0],p=m[1];return l.a.createElement(E.Provider,{value:{user:o,setUser:i,resetContext:function(){i({}),p([])},travels:d,setTravels:p}},a)},g=t(1),b=t.n(g),h=function(){var e=p(),a=e.form,t=e.handleInput,c=Object(n.useContext)(E).setUser,r=Object(o.f)().push;return l.a.createElement("div",{className:"uk-section"},l.a.createElement("div",{className:"uk-container uk-flex uk-flex-center"},l.a.createElement(i,Object.assign({submit:function(e){var t;e.preventDefault(),(t=a,k.a.post("".concat("heroku.com","/login"),t)).then((function(e){var a=e.data,t=a.user,n=a.token;localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("token",n),c(t),r("/home")})).catch((function(e){var a=e.response.data.errormsg;b.a.notification({message:"".concat(a),pos:"top-center",status:"danger"})}))},action:"login",handleChange:t},a))))},N=function(){var e=p(),a=e.form,t=e.handleInput,c=Object(n.useContext)(E).setUser,r=Object(o.f)().push;return l.a.createElement("div",{className:"uk-section"},l.a.createElement("div",{className:"uk-container uk-flex uk-flex-center"},l.a.createElement(i,Object.assign({submit:function(e){var t;e.preventDefault(),(t=a,k.a.post("".concat("heroku.com","/signup"),t)).then((function(e){var a=e.data,t=a.user,n=a.token;localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("token",n),c(t),r("/home"),b.a.notification({message:"Felicidades! Cuenta creada con \xe9xito",pos:"top-center",status:"success"})})).catch((function(e){var a=e.response.data.errormsg;console.log(e.response.data),b.a.notification({message:"".concat(a),pos:"top-center",status:"danger"})}))},action:"signup",handleChange:t},a))))},y=t(16),x=function(e){var a=localStorage.getItem("token");return k.a.get("".concat("heroku.com","/travel/").concat(e),{headers:{Authorization:a}})},O=t(12),j=t.n(O);t(32);j.a.locale("es");var w=function(e){Object(y.a)(e);var a=Object(n.useContext)(E),t=a.user,c=(a.travels,a.setTravels),r=Object(o.g)().id,i=Object(o.f)().push;return Object(n.useEffect)((function(){if(!Object.keys(t).length)return i("/login");x(r).then((function(e){var a=e.data.travel;c(a)}))}),[]),l.a.createElement("div",null,"Esta es la seccion de info")},C=function(e){Object(y.a)(e);var a=Object(n.useState)(!0),t=Object(u.a)(a,2),c=t[0],r=t[1],o=p(),i=o.form,s=o.handleInput,m=o.handleFileInput,d=Object(n.useContext)(E),v=d.user,f=d.setUser,g=function(){r((function(e){return!e}))};return l.a.createElement("div",{className:"uk-container uk-flex uk-flex-center "},c?l.a.createElement("form",{className:"uk-form-stacked uk-container-special"},l.a.createElement("div",{className:"uk-margin"},l.a.createElement("div",{"uk-form-custom":"target: true"},l.a.createElement("input",{className:"uk-input",type:"file",onChange:m,name:"profilepic"}),l.a.createElement("input",{className:"uk-input uk-form-width-large uk-input-special-width",type:"text",placeholder:"Click para subir nueva foto"}))),l.a.createElement("div",{className:"uk-margin"},l.a.createElement("label",{className:"uk-form-label"},"Username"),l.a.createElement("div",{className:"uk-inline"},l.a.createElement("input",{onChange:s,name:"username",className:"uk-input",type:"text",defaultValue:v.username}))),l.a.createElement("div",{className:"uk-container uk-flex uk-flex-center"},l.a.createElement("button",{className:"uk-button uk-button-primary button-margin-right",type:"button",onClick:g},"Cancelar"),l.a.createElement("button",{className:"uk-button uk-button-primary",type:"button",onClick:function(e){e.preventDefault();var a=new FormData,t=i.profilepic,n=i.username;n||(n=v.username),t||(t=[v.profilepic]),t[0]!==v.profilepic||n!==v.username?void 0===t&&n===v.username||(a.append("profilepic",t[0]),a.append("username",n),function(e){var a=localStorage.getItem("token");return k.a.patch("".concat("heroku.com","/profile/edit"),e,{headers:{Authorization:a,"Content-Type":"multipart/form-data"}})}(a).then((function(e){var a=e.data.user;console.log(a),f(a),g(),b.a.notification({message:"Profile actualizado con \xe9xito!",pos:"top-center",status:"success"})})).catch((function(e){var a=e.response.data.errormsg;b.a.notification({message:"".concat(a),pos:"top-center",status:"danger"})}))):b.a.notification({message:"No hay cambios que actualizar",pos:"top-center",status:"warning"})}},"Actualizar Datos"))):l.a.createElement(S,null))},S=function(){var e=Object(n.useState)(!1),a=Object(u.a)(e,2),t=a[0],c=a[1],r=Object(n.useContext)(E).user;return l.a.createElement("div",{className:"uk-container uk-flex uk-flex-center"},t?l.a.createElement(C,null):l.a.createElement("form",{className:"uk-form-stacked uk-container-special"},l.a.createElement("div",{className:"avatar uk-flex uk-flex-center"},l.a.createElement("img",{className:"avatar",src:r.profilepic,alt:"profilepic",width:"160px",height:"160spx"})),l.a.createElement("div",{className:"uk-margin"},l.a.createElement("label",{className:"uk-form-label text-center"},"Username"),l.a.createElement("div",{className:"uk-inline"},l.a.createElement("input",{name:"username",className:"uk-input",type:"text",defaultValue:r.username,disabled:!0}))),l.a.createElement("div",{className:"uk-container uk-flex uk-flex-center"},l.a.createElement("button",{className:"uk-button uk-button-primary",type:"button",onClick:function(){c((function(e){return!e}))}},"Edit"))))},P=t(11),I=["Aguascalientes","Baja California","Baja California Sur","Campeche","Chiapas","Chihuahua","Coahuila de Zaragoza","Colima","Durango","Estado de M\xe9xico","Guanajuato","Guerrero","Hidalgo","Jalisco","Michoac\xe1n","Morelos","Nayarit","Nuevo Le\xf3n","Oaxaca","Puebla","Quer\xe9taro","Quintana Roo","San Luis Potos\xed","Sinaloa","Sonora","Tabasco","Tamaulipas","Tlaxcala","Veracruz","Yucat\xe1n","Zacatecas"],D=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],T=function(e){var a=e.removeKey,t=e.handleChange,c=e.handleFileInput,r=e.title,o=void 0===r?"":r,i=e.price,s=void 0===i?"":i,m=e.outDate,d=void 0===m?"":m,p=e.countryState,v=void 0===p?"":p,k=e.description,E=void 0===k?"":k,f=e.type,g=void 0===f?"":f,b=e.aviableSeats,h=void 0===b?"":b,N=e.duration,y=void 0===N?"":N,x=e.submit,O=e.route,j=e.action,w=Object(n.useState)([{point:null}]),C=Object(u.a)(w,2),S=C[0],T=C[1];return l.a.createElement("form",{onSubmit:x},l.a.createElement("fieldset",{className:"uk-fieldset"},l.a.createElement("div",{className:"uk-text-center","uk-grid":"true"},l.a.createElement("div",{className:"uk-width-1-2"},l.a.createElement("div",null,l.a.createElement("label",{className:"uk-form-label"},"T\xedtulo del Viaje"),l.a.createElement("div",{className:"uk-margin"},l.a.createElement("input",{onChange:t,name:"title",value:o,className:"uk-input",type:"text"})))),l.a.createElement("div",{className:"uk-width-1-2"},l.a.createElement("div",{className:"uk-width-4-6"},l.a.createElement("label",{className:"uk-form-label"},"Precio por Persona (MXN)"),l.a.createElement("div",{className:"uk-margin"},l.a.createElement("input",{onChange:t,name:"price",value:s,className:"uk-input",type:"number"}))))),l.a.createElement("div",{className:"uk-text-center","uk-grid":"true"},l.a.createElement("div",{className:"uk-width-1-2"},l.a.createElement("div",null,l.a.createElement("label",{className:"uk-form-label"},"Fecha de Salida"),l.a.createElement("div",{className:"uk-margin"},l.a.createElement("input",{onChange:t,name:"outDate",value:d,className:"uk-input",type:"date"})))),l.a.createElement("div",{className:"uk-width-1-2"},l.a.createElement("div",null,l.a.createElement("label",{className:"uk-form-label"},"Estado a visitar"),l.a.createElement("div",{className:"uk-margin"},l.a.createElement("select",{onChange:t,name:"countryState",value:v,className:"uk-select"},l.a.createElement("option",{disabled:!0,value:""},"selecciona\xa0una\xa0opci\xf3n \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",I.map((function(e,a){return l.a.createElement("option",{key:a,value:"".concat(e)},e,"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0")}))))))),l.a.createElement("label",{className:"uk-form-label"},"Descripci\xf3n"),l.a.createElement("div",{className:"uk-margin"},l.a.createElement("textarea",{className:"uk-textarea",rows:"9",placeholder:"Escribe una descripcion",onChange:t,name:"description",value:E,type:"text"})),l.a.createElement("div",{className:"uk-text-center","uk-grid":"true"},l.a.createElement("div",{className:"uk-width-1-3"},l.a.createElement("div",null,l.a.createElement("label",{className:"uk-form-label"},"Transporte"),l.a.createElement("select",{type:"text",onChange:t,name:"type",value:g,className:"uk-select"},l.a.createElement("option",{disabled:!0,value:""},"selecciona una opci\xf3n"),l.a.createElement("option",{value:"autobus"},"Autob\xfas"),l.a.createElement("option",{value:"van"},"Van")))),l.a.createElement("div",{className:"uk-width-1-3"},l.a.createElement("div",null,l.a.createElement("label",{className:"uk-form-label"},"Lugares Disponibles"),l.a.createElement("select",{type:"number",onChange:t,name:"aviableSeats",value:h,className:"uk-select"},l.a.createElement("option",{disabled:!0,value:""},"selecciona una opci\xf3n"),l.a.createElement("option",{value:"8"},"8"),l.a.createElement("option",{value:"16"},"16"),l.a.createElement("option",{value:"24"},"24"),l.a.createElement("option",{value:"32"},"32")))),l.a.createElement("div",{className:"uk-width-1-3"},l.a.createElement("div",null,l.a.createElement("label",{className:"uk-form-label"},"Duraci\xf3n en d\xedas"),l.a.createElement("select",{onChange:t,name:"duration",value:y,className:"uk-select"},l.a.createElement("option",{disabled:!0,value:""},"selecciona una opci\xf3n"),D.map((function(e,a){return l.a.createElement("option",{key:a,value:"".concat(e)},e)})))))),l.a.createElement("div",{className:"container uk-margin-medium-bottom uk-margin-medium-top"},l.a.createElement("p",null,"Puntos de Inter\xe9s"),S.map((function(e,n){var c="point-".concat(n);return l.a.createElement("div",{key:"dataset-".concat(n)},l.a.createElement("label",{className:"uk-form-label"},"Punto de inter\xe9s ".concat(n),l.a.createElement("button",{type:"button",className:"uk-margin-medium-left","uk-icon":"trash",onClick:function(){return function(e){a("point-".concat(e)),console.log("before",S),console.log(e);var t=Object(P.a)(S);t.splice(e,1),T(t),console.log("after",S)}(n)}})),l.a.createElement("div",{className:"uk-margin"},l.a.createElement("input",{onChange:t,name:c,value:O,className:"uk-input",type:"text"})))})),l.a.createElement("input",{type:"button",value:"Agregar nuevo punto de inter\xe9s",onClick:function(){var e=Object(P.a)(S);e.push({point:null}),T(e)},className:"uk-button uk-button-default"})),l.a.createElement("div",{className:"uk-margin","uk-margin":"true"},l.a.createElement("div",{"uk-form-custom":"target: true"},l.a.createElement("input",{onChange:c,name:"photos",type:"file",multiple:!0}),l.a.createElement("input",{className:"uk-input uk-form-width-large",type:"text",placeholder:"Selecciona fotos representativas del viaje",disabled:!0}))),l.a.createElement("div",{className:"uk-container uk-flex uk-flex-center uk-margin-medium-top"},l.a.createElement("button",{className:"uk-button uk-button-primary",type:"submit"},j))))},A=function(){var e=p(),a=e.form,t=e.handleInput,n=e.handleFileInput,c=e.removeKey,r=Object(o.f)().push;return l.a.createElement("div",{className:"uk-section"},l.a.createElement("div",{className:"uk-container "},l.a.createElement(T,Object.assign({submit:function(e){e.preventDefault(),console.log(a);var t=new FormData;for(var n in a){if("photos"===n)for(var l=0,c=Array.from(a[n]);l<c.length;l++){var o=c[l];t.append(n,o)}"type"!==n&&"aviableSeats"!==n||("type"===n?t.append("transport.type",a[n]):t.append("transport.aviableSeats",a[n])),n.includes("point")||"route"===n?t.append("route",a[n]):"title"!==n&&"duration"!==n&&"description"!==n&&"price"!==n&&"countryState"!==n&&"outDate"!==n||t.append(n,a[n])}(function(e){var a=localStorage.getItem("token");return k.a.post("".concat("heroku.com","/travel"),e,{headers:{Authorization:a,"Content-Type":"multipart/form-data"}})})(t).then((function(e){console.log(e.data),b.a.notification({message:"\xa1Viaje creado con exito!",pos:"top-center",status:"success"}),r("/home")})).catch((function(e){console.log(e),e&&b.a.notification({message:"Algo sali\xf3 mal, verifica que haz llenado todos los campos",pos:"top-center",status:"danger"})}))},handleChange:t,handleFileInput:n,action:"Crear",removeKey:c},a))))},F=function(e){var a=e.removeKeyWithIndex,t=e.outDate,c=void 0===t?"":t,r=e.countryState,i=void 0===r?"":r,s=e.handleChange,m=e.handleFileInput,d=e.title,p=void 0===d?"":d,v=e.price,k=void 0===v?"":v,E=e.description,f=void 0===E?"":E,g=e.type,b=void 0===g?"":g,h=e.aviableSeats,N=void 0===h?"":h,y=e.duration,x=void 0===y?"":y,O=e.submit,j=e.route,w=void 0===j?[]:j,C=e.photos,S=void 0===C?[]:C,T=(e.pointOfInterest,e.action),A=Object(o.f)().push,F=Object(n.useState)(Object(P.a)(w)),U=Object(u.a)(F,2),z=U[0],M=U[1];Object(n.useEffect)((function(){M(Object(P.a)(w))}),[w]);return console.log(z),l.a.createElement("form",{onSubmit:O},l.a.createElement("fieldset",{className:"uk-fieldset"},l.a.createElement("div",{className:"uk-text-center","uk-grid":"true"},l.a.createElement("div",{className:"uk-width-1-2"},l.a.createElement("div",null,l.a.createElement("label",{className:"uk-form-label"},"T\xedtulo del Viaje"),l.a.createElement("div",{className:"uk-margin"},l.a.createElement("input",{onChange:s,name:"title",value:p,className:"uk-input",type:"text"})))),l.a.createElement("div",{className:"uk-width-1-2"},l.a.createElement("div",{className:"uk-width-4-6"},l.a.createElement("label",{className:"uk-form-label"},"Precio por Persona (MXN)"),l.a.createElement("div",{className:"uk-margin"},l.a.createElement("input",{onChange:s,name:"price",value:k,className:"uk-input",type:"number"}))))),l.a.createElement("div",{className:"uk-text-center","uk-grid":"true"},l.a.createElement("div",{className:"uk-width-1-2"},l.a.createElement("div",null,l.a.createElement("label",{className:"uk-form-label"},"Fecha de Salida"),l.a.createElement("div",{className:"uk-margin"},l.a.createElement("input",{onChange:s,name:"outDate",value:c,className:"uk-input",type:"date"})))),l.a.createElement("div",{className:"uk-width-1-2"},l.a.createElement("div",null,l.a.createElement("label",{className:"uk-form-label"},"Estado a visitar"),l.a.createElement("div",{className:"uk-margin"},l.a.createElement("select",{onChange:s,name:"countryState",value:i,className:"uk-select"},l.a.createElement("option",{disabled:!0,value:""},"selecciona\xa0una\xa0opci\xf3n \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",I.map((function(e,a){return l.a.createElement("option",{key:a,value:"".concat(e)},e,"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0")}))))))),l.a.createElement("label",{className:"uk-form-label"},"Descripci\xf3n"),l.a.createElement("div",{className:"uk-margin"},l.a.createElement("textarea",{className:"uk-textarea",rows:"9",placeholder:"Escribe una descripcion",onChange:s,name:"description",value:f,type:"text"})),l.a.createElement("div",{className:"uk-text-center","uk-grid":"true"},l.a.createElement("div",{className:"uk-width-1-3"},l.a.createElement("div",null,l.a.createElement("label",{className:"uk-form-label"},"Transporte"),l.a.createElement("select",{type:"text",onChange:s,name:"type",value:b,className:"uk-select"},l.a.createElement("option",{disabled:!0,value:""},"selecciona una opci\xf3n"),l.a.createElement("option",{value:"autobus"},"Autob\xfas"),l.a.createElement("option",{value:"van"},"Van")))),l.a.createElement("div",{className:"uk-width-1-3"},l.a.createElement("div",null,l.a.createElement("label",{className:"uk-form-label"},"Lugares Disponibles"),l.a.createElement("select",{type:"number",onChange:s,name:"aviableSeats",value:N,className:"uk-select"},l.a.createElement("option",{disabled:!0,value:""},"selecciona una opci\xf3n"),l.a.createElement("option",{value:"8"},"8"),l.a.createElement("option",{value:"16"},"16"),l.a.createElement("option",{value:"24"},"24"),l.a.createElement("option",{value:"32"},"32")))),l.a.createElement("div",{className:"uk-width-1-3"},l.a.createElement("div",null,l.a.createElement("label",{className:"uk-form-label"},"Duraci\xf3n en d\xedas"),l.a.createElement("select",{onChange:s,name:"duration",value:x,className:"uk-select"},l.a.createElement("option",{disabled:!0,value:""},"selecciona una opci\xf3n"),D.map((function(e,a){return l.a.createElement("option",{key:a,value:"".concat(e)},e)})))))),l.a.createElement("div",{className:"container uk-margin-medium-bottom uk-margin-medium-top"},l.a.createElement("p",null,"Puntos de Inter\xe9s"),z.map((function(e,t){var n="point-".concat(t);return l.a.createElement("div",{key:"dataset-".concat(t)},l.a.createElement("label",{className:"uk-form-label"},"Punto de inter\xe9s ".concat(t),l.a.createElement("button",{type:"button",className:"uk-margin-medium-left","uk-icon":"trash",onClick:function(){return e=t,console.log("actual",z),console.log(e),z.splice(e,1),console.log("spliced",z),M(z),void a("point-".concat(e),e);var e}})),l.a.createElement("div",{className:"uk-margin"},l.a.createElement("input",{onChange:s,name:n,defaultValue:e,className:"uk-input",type:"text"})))})),l.a.createElement("input",{type:"button",value:"Agregar nuevo punto de inter\xe9s",onClick:function(){M([].concat(Object(P.a)(z),[""]))},className:"uk-button uk-button-default"})),l.a.createElement("div",{className:"uk-margin","uk-margin":"true"},l.a.createElement("div",{"uk-form-custom":"target: true"},l.a.createElement("input",{onChange:m,name:"photos",type:"file",defaultValue:S,multiple:!0}),l.a.createElement("input",{className:"uk-input uk-form-width-large",type:"text",placeholder:"Reemplaza fotos representativas del viaje",disabled:!0}))),l.a.createElement("div",{className:"uk-container uk-flex uk-flex-center"},l.a.createElement("button",{className:"uk-button uk-button-primary button-margin-right",type:"submit"},T),l.a.createElement("button",{className:"uk-button uk-button-primary",type:"button",onClick:function(){A("/home")}},"Cancelar"))))};function U(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}var z=function(){var e=Object(o.g)().id,a=Object(o.f)().push,t=p(),c=t.form,r=t.handleInput,i=t.handleFileInput,u=t.setForm,m=t.removeKeyWithIndex;return Object(n.useEffect)((function(){x(e).then((function(e){var a={},t=e.data.travel,n=t,l=n.transport.type,c=n.transport.aviableSeats,r=n.route,o=n.outDate;r.map((function(e,t){return a["point-".concat(t)]=e}));var i=new Date(o).toISOString().substring(0,10);console.log(o),function(e){u(e)}(t=function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?U(t,!0).forEach((function(a){Object(s.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):U(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}({},t,{type:l,aviableSeats:c,outDate:o=i},a))})).catch((function(e){console.log(e)}))}),[]),l.a.createElement("div",{className:"uk-section"},l.a.createElement("div",{className:"uk-container "},l.a.createElement(F,Object.assign({submit:function(t){t.preventDefault(),console.log(c);var n=new FormData;for(var l in c){if("photos"===l)for(var r=0,o=Array.from(c[l]);r<o.length;r++){var i=o[r];n.append(l,i)}"type"!==l&&"aviableSeats"!==l||("type"===l?n.append("transport.type",c[l]):n.append("transport.aviableSeats",c[l])),l.includes("point")?n.append("route",c[l]):"title"!==l&&"duration"!==l&&"description"!==l&&"price"!==l&&"countryState"!==l&&"outDate"!==l||n.append(l,c[l])}var s=!0,u=!1,m=void 0;try{for(var d,p=n.entries()[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var v=d.value;console.log(v[0]+", "+v[1])}}catch(E){u=!0,m=E}finally{try{s||null==p.return||p.return()}finally{if(u)throw m}}(function(e,a){var t=localStorage.getItem("token");return k.a.patch("".concat("heroku.com","/travel/").concat(a),e,{headers:{Authorization:t,"Content-Type":"multipart/form-data"}})})(n,e).then((function(e){console.log(e.data),b.a.notification({message:"\xa1Viaje actualizado con exito!",pos:"top-center",status:"success"}),a("/home")})).catch((function(e){console.log(e),e&&b.a.notification({message:"Algo sali\xf3 mal, verifica por favor",pos:"top-center",status:"danger"})}))},handleChange:r,handleFileInput:i,action:"Update",removeKeyWithIndex:m},c))))},M=t(2);j.a.locale("es");var V=function(e){var a=e._id,t=e.title,n=e.photos,c=void 0===n?[]:n,r=e.price,o=e.transport,i=e.updatedAt,s=e.deleteATravel,u=e.outDate,m=e.countryState,d=e.duration,p=e.userType;return console.log(p),l.a.createElement("div",null,l.a.createElement("div",{className:"uk-card uk-card-default "},l.a.createElement("div",{className:"uk-card-header"},l.a.createElement("div",{className:"uk-grid-small uk-flex-middle","uk-grid":"true"},l.a.createElement("div",{className:"uk-width-expand"},l.a.createElement("h3",{className:"uk-card-title uk-margin-remove-bottom"},t),l.a.createElement("time",{className:"uk-text-meta uk-margin-remove-top"},l.a.createElement("time",null,"\xdaltima actualizaci\xf3n: ".concat(j()(i).calendar())))),"admin"===p?l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("span",{"uk-icon":"more-vertical"})),l.a.createElement("div",{"uk-dropdown":"true"},l.a.createElement("ul",{className:"uk-nav uk-dropdown-nav"},l.a.createElement("li",{className:"uk-flex uk-flex-center"},l.a.createElement("button",{type:"button","uk-icon":"trash",onClick:s})),l.a.createElement("li",{className:"uk-nav-divider"}),l.a.createElement("li",{className:"uk-flex uk-flex-center"},l.a.createElement(M.b,{to:"travel/edit/".concat(a),"uk-icon":"file-edit"}))))):null)),l.a.createElement("div",{className:"uk-card-media-left uk-cover-container"},l.a.createElement("img",{src:c[0],alt:"travel","uk-cover":"true"}),l.a.createElement("canvas",{width:"600",height:"500"})),l.a.createElement("div",{className:"uk-margin","uk-grid":"true"},l.a.createElement("div",{className:"uk-width-1-3 uk-flex-inline"},l.a.createElement("div",{className:"uk-padding-small"},l.a.createElement("img",{src:"https://res.cloudinary.com/elwiiman/image/upload/v1576184255/MexicoParaTodos/Utils/calendar_it2mei.png",alt:"calendar-icon",className:"personal-icon uk-margin-small-right "}),l.a.createElement("span",null,j()(u).format("L")))),l.a.createElement("div",{className:"uk-width-1-3 uk-flex-inline"},l.a.createElement("div",{className:"uk-padding-small"},l.a.createElement("img",{src:"https://res.cloudinary.com/elwiiman/image/upload/v1576184901/MexicoParaTodos/Utils/placeholder_ll1vml.png",alt:"calendar-icon",className:"personal-icon uk-margin-small-right "}),l.a.createElement("span",null,m))),l.a.createElement("div",{className:"uk-width-1-3 uk-flex-inline"},l.a.createElement("div",{className:"uk-padding-small"},l.a.createElement("img",{src:"https://res.cloudinary.com/elwiiman/image/upload/v1576187220/MexicoParaTodos/Utils/sunny-day_xwu0tk.png",alt:"sun-icon",className:"personal-icon uk-margin-small-right "}),l.a.createElement("span",null,d)),l.a.createElement("div",{className:"uk-padding-small"},l.a.createElement("img",{src:"https://res.cloudinary.com/elwiiman/image/upload/v1576187107/MexicoParaTodos/Utils/moon_xt6bi4.png",alt:"night-icon",className:"personal-icon uk-margin-small-right "}),l.a.createElement("span",null,d-1)))),l.a.createElement("div",{className:"uk-width-1-1  uk-flex uk-padding uk-flex-right custom-gray-color-div "},l.a.createElement("div",{className:"uk-width-1-3"},l.a.createElement("img",{src:"https://res.cloudinary.com/elwiiman/image/upload/v1576187970/MexicoParaTodos/Utils/coin_hycoxa.png",alt:"coin-icon",className:"personal-icon uk-margin-small-right "}),l.a.createElement("span",null,new Intl.NumberFormat("en-US",{style:"currency",currencyDisplay:"code",currency:"MXN"}).format(r))),l.a.createElement("div",null,l.a.createElement("img",{src:"https://res.cloudinary.com/elwiiman/image/upload/v1576189039/MexicoParaTodos/Utils/sitting-silhouette_k4sxfd.png",alt:"seat-icon",className:"personal-icon uk-margin-small-right "}),l.a.createElement("span",null,o.aviableSeats))),l.a.createElement("div",{className:"uk-card-footer"},l.a.createElement(M.b,{to:"travel/info/".concat(a),className:"uk-button uk-button-text"},"M\xe1s Informaci\xf3n"))))},_=function(){var e=Object(n.useContext)(E),a=e.user,t=e.travels,c=e.setTravels,r=Object(o.f)().push,i=function(e,a){console.log(e),function(e){var a=localStorage.getItem("token");return k.a.delete("".concat("heroku.com","/travel/").concat(e),{headers:{Authorization:a,"Content-Type":"multipart/form-data"}})}(e).then((function(){t.splice(a,1),c(Object(P.a)(t)),b.a.notification({message:"Viaje borrado con \xe9xito!",pos:"top-center",status:"success"})})).catch((function(){b.a.notification({message:"Ups! Algo sali\xf3 mal con el borrado, itenta de nuevo",pos:"top-center",status:"danger"})}))};return Object(n.useEffect)((function(){if(!Object.keys(a).length)return r("/login");(function(){var e=localStorage.getItem("token");return k.a.get("".concat("heroku.com","/travel"),{headers:{Authorization:e}})})().then((function(e){var a=e.data.travels;c(a)}))}),[]),l.a.createElement("div",{className:"uk-section"},l.a.createElement("div",{className:"uk-container"},l.a.createElement("div",{className:"uk-child-width-1-2@m uk-grid-small uk-grid-match","uk-grid":"true"},t.map((function(e,t){return l.a.createElement(V,Object.assign({key:t,deleteATravel:function(){return i(e._id,t)}},e,{userType:a.role}))})))))},K=function(){return l.a.createElement(o.c,null,l.a.createElement(o.a,{exact:!0,path:"/"},l.a.createElement("h1",null,"Home")),l.a.createElement(o.a,{exact:!0,path:"/login"},l.a.createElement(h,null)),l.a.createElement(o.a,{exact:!0,path:"/signup"},l.a.createElement(N,null)),l.a.createElement(o.a,{exact:!0,path:"/home"},l.a.createElement(_,null)),l.a.createElement(o.a,{exact:!0,path:"/profile"},l.a.createElement(S,null)),l.a.createElement(o.a,{exact:!0,path:"/travel"},l.a.createElement(A,null)),l.a.createElement(o.a,{path:"/travel/edit/:id",component:z}),l.a.createElement(o.a,{path:"/travel/info/:id",component:w}))},L=function(){var e=Object(n.useContext)(E),a=e.user,t=e.resetContext,c=Object(o.f)().push;return l.a.createElement("nav",{className:"uk-navbar-container","uk-navbar":"true"},l.a.createElement("div",{className:"uk-navbar-left"},l.a.createElement("ul",{className:"uk-navbar-nav"},l.a.createElement("li",null,l.a.createElement("div",{className:"logo"},l.a.createElement("img",{src:"https://res.cloudinary.com/elwiiman/image/upload/v1574493537/MexicoParaTodos/logo.png",alt:"logo"}))),a._id?l.a.createElement("li",{className:""},l.a.createElement(M.c,{className:"lowcase",exact:!0,to:"/home"},"Home")):null,"admin"===a.role?l.a.createElement("li",{className:""},l.a.createElement(M.c,{className:"lowcase",exact:!0,to:"/travel"},"Crear Nuevo Viaje")):null)),l.a.createElement("div",{className:"uk-navbar-right"},a._id?l.a.createElement("ul",{className:"uk-navbar-nav"},l.a.createElement("li",null,l.a.createElement(M.c,{className:"lowcase",to:"#"},a.username?a.username:a.email),l.a.createElement("div",{className:"uk-navbar-dropdown"},l.a.createElement("ul",{className:"uk-nav uk-navbar-dropdown-nav"},l.a.createElement("li",{className:"uk-active uk-flex uk-flex-center"},l.a.createElement(M.c,{to:"/profile"}," Perfil")),l.a.createElement("hr",null),l.a.createElement("li",{className:"uk-active uk-flex uk-flex-center"},l.a.createElement("button",{"uk-icon":"icon: sign-out",className:"uk-button uk-button-default uk-button-small lowcase",onClick:function(){localStorage.clear(),c("/login"),t()}},"Logout")))))):l.a.createElement("ul",{className:"uk-navbar-nav"},l.a.createElement("li",{className:""},l.a.createElement(M.b,{onClick:function(){console.log("imhere")},className:"lowcase",to:"/login"},"Login")),l.a.createElement("li",{className:""},l.a.createElement(M.b,{className:"lowcase",to:"/signup"},"Signup")))))};t(66);var J=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(L,null),l.a.createElement(K,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=t(36),B=t.n(W);t(67);b.a.use(B.a);r.a.render(l.a.createElement((function(){return l.a.createElement(f,null,l.a.createElement(M.a,null,l.a.createElement(J,null)))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[37,1,2]]]);
//# sourceMappingURL=main.ac07c301.chunk.js.map